import{g as nt,r as i,i as x,j as h,a as rt,p as ot,A as st,b as it,T as at,G as Ie,s as ee,c as Fe,u as ct,R as ut}from"./index-BsqnuhU4.js";import{c as he}from"./clsx-B-dksMZM.js";var Le=Object.prototype.hasOwnProperty;function Ce(e,t,n){for(n of e.keys())if(te(n,t))return n}function te(e,t){var n,r,s;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&te(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(s=r,s&&typeof s=="object"&&(s=Ce(t,s),!s)||!t.has(s))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(s=r[0],s&&typeof s=="object"&&(s=Ce(t,s),!s)||!te(r[1],t.get(s)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Le.call(e,n)&&++r&&!Le.call(t,n)||!(n in t)||!te(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function de(e){let t=!1;return{promise:new Promise((r,s)=>{e.then(a=>!t&&r(a)).catch(a=>!t&&s(a))}),cancel(){t=!0}}}const lt=["onCopy","onCut","onPaste"],ft=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],dt=["onFocus","onBlur"],pt=["onInput","onInvalid","onReset","onSubmit"],gt=["onLoad","onError"],ht=["onKeyDown","onKeyPress","onKeyUp"],mt=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],yt=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Et=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],wt=["onSelect"],vt=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],St=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],xt=["onScroll"],Rt=["onWheel"],Tt=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Pt=["onTransitionEnd"],Lt=["onToggle"],Ct=["onChange"],bt=[...lt,...ft,...dt,...pt,...gt,...ht,...mt,...yt,...Et,...wt,...vt,...St,...xt,...Rt,...Tt,...Pt,...Ct,...Lt];function Ve(e,t){const n={};for(const r of bt){const s=e[r];s&&(t?n[r]=(a=>s(a,t(r))):n[r]=s)}return n}var xe,be;function Dt(){if(be)return xe;be=1;var e=function(){};return xe=e,xe}var At=Dt();const F=nt(At),Ge=i.createContext(null),_t="noopener noreferrer nofollow";class jt{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return x(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){x(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,n,r){t.href=n,t.rel=this.externalLinkRel||_t,t.target=r?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(n=>{x(this.pdfDocument),x(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(n):Array.isArray(t)?n(t):t.then(n)}).then(n=>{x(Array.isArray(n));const r=n[0];new Promise(s=>{x(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(a=>{s(a)}).catch(()=>{x(!1)}):typeof r=="number"?s(r):x(!1)}).then(s=>{const a=s+1;x(this.pdfViewer),x(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:s,pageNumber:a})})})}goToPage(t){const n=t-1;x(this.pdfViewer),x(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function ne({children:e,type:t}){return h.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:e})}const De={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function kt(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function re(){return i.useReducer(kt,{value:void 0,error:void 0})}const me=typeof window<"u",$e=me&&window.location.protocol==="file:";function Mt(e){return typeof e<"u"}function J(e){return Mt(e)&&e!==null}function Nt(e){return typeof e=="string"}function Ot(e){return e instanceof ArrayBuffer}function It(e){return x(me),e instanceof Blob}function Te(e){return Nt(e)&&/^data:/.test(e)}function Ae(e){x(Te(e));const[t="",n=""]=e.split(",");return t.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function Ft(){return me&&window.devicePixelRatio||1}const Be="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function _e(){F(!$e,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Be}`)}function Vt(){F(!$e,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Be}`)}function K(e){e?.cancel&&e.cancel()}function Pe(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function Gt(e){return e.name==="RenderingCancelledException"}function $t(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return n(new Error("Error while reading a file."));t(r.result)},r.onerror=s=>{if(!s.target)return n(new Error("Error while reading a file."));const{error:a}=s.target;if(!a)return n(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(e)})}const{PDFDataRangeTransport:Bt}=ot,Ht=(e,t)=>{switch(t){case De.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");e(n);break}case De.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");e(n);break}}};function je(e){return typeof e=="object"&&e!==null&&("data"in e||"range"in e||"url"in e)}const ke=i.forwardRef(function({children:t,className:n,error:r="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:a,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDFâ€¦",noData:f="No PDF file specified.",onItemClick:d,onLoadError:g,onLoadProgress:p,onLoadSuccess:m,onPassword:y=Ht,onSourceError:S,onSourceSuccess:R,options:E,renderMode:A,rotate:P,scale:b,...O},w){const[T,L]=re(),{value:C,error:V}=T,[U,G]=re(),{value:j,error:$}=U,N=i.useRef(new jt),I=i.useRef([]),B=i.useRef(void 0),q=i.useRef(void 0);o&&o!==B.current&&je(o)&&(F(!te(o,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=o),E&&E!==q.current&&(F(!te(E,q.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),q.current=E);const oe=i.useRef({scrollPageIntoView:v=>{const{dest:D,pageNumber:k,pageIndex:M=k-1}=v;if(d){d({dest:D,pageIndex:M,pageNumber:k});return}const Q=I.current[M];if(Q){Q.scrollIntoView();return}F(!1,`An internal link leading to page ${k} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});i.useImperativeHandle(w,()=>({linkService:N,pages:I,viewer:oe}),[]);function we(){R&&R()}function se(){V&&(F(!1,V.toString()),S&&S(V))}function ie(){L({type:"RESET"})}i.useEffect(ie,[o,L]);const Y=i.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return Te(o)?{data:Ae(o)}:(_e(),{url:o});if(o instanceof Bt)return{range:o};if(Ot(o))return{data:o};if(me&&It(o))return{data:await $t(o)};if(x(typeof o=="object"),x(je(o)),"url"in o&&typeof o.url=="string"){if(Te(o.url)){const{url:v,...D}=o;return{data:Ae(v),...D}}_e()}return o},[o]);i.useEffect(()=>{const v=de(Y());return v.promise.then(D=>{L({type:"RESOLVE",value:D})}).catch(D=>{L({type:"REJECT",error:D})}),()=>{K(v)}},[Y,L]),i.useEffect(()=>{if(!(typeof C>"u")){if(C===!1){se();return}we()}},[C]);function ae(){j&&(m&&m(j),I.current=new Array(j.numPages),N.current.setDocument(j))}function X(){$&&(F(!1,$.toString()),g&&g($))}i.useEffect(function(){G({type:"RESET"})},[G,C]),i.useEffect(function(){if(!C)return;const D=E?{...C,...E}:C,k=rt(D);p&&(k.onProgress=p),y&&(k.onPassword=y);const M=k,Q=M.promise.then(fe=>{G({type:"RESOLVE",value:fe})}).catch(fe=>{M.destroyed||G({type:"REJECT",error:fe})});return()=>{Q.finally(()=>M.destroy())}},[E,G,C]),i.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){X();return}ae()}},[j]),i.useEffect(function(){N.current.setViewer(oe.current),N.current.setExternalLinkRel(s),N.current.setExternalLinkTarget(a)},[s,a]);const ce=i.useCallback((v,D)=>{I.current[v]=D},[]),pe=i.useCallback(v=>{delete I.current[v]},[]),H=i.useMemo(()=>({imageResourcesPath:c,linkService:N.current,onItemClick:d,pdf:j,registerPage:ce,renderMode:A,rotate:P,scale:b,unregisterPage:pe}),[c,d,j,ce,A,P,b,pe]),_=i.useMemo(()=>Ve(O,()=>j),[O,j]);function ue(){function v(k){return!!k?.pdf}if(!v(H))throw new Error("pdf is undefined");const D=typeof t=="function"?t(H):t;return h.jsx(Ge.Provider,{value:H,children:D})}function le(){return o?j==null?h.jsx(ne,{type:"loading",children:typeof u=="function"?u():u}):j===!1?h.jsx(ne,{type:"error",children:typeof r=="function"?r():r}):ue():h.jsx(ne,{type:"no-data",children:typeof f=="function"?f():f})}return h.jsx("div",{className:he("react-pdf__Document",n),ref:l,..._,children:le()})});function He(){return i.useContext(Ge)}function Ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);if(n.length<=1){var r=n[0];return r||null}return function(a){for(var o=0,l=n;o<l.length;o++){var c=l[o];typeof c=="function"?c(a):c&&(c.current=a)}}}const We=i.createContext(null);function ye(){return i.useContext(We)}function Ut(){const e=He(),t=ye();x(t);const n={...e,...t},{imageResourcesPath:r,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:u,pdf:f,renderForms:d,rotate:g,scale:p=1}=n;x(f),x(u),x(s);const[m,y]=re(),{value:S,error:R}=m,E=i.useRef(null);F(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function A(){S&&o&&o(S)}function P(){R&&(F(!1,R.toString()),a&&a(R))}i.useEffect(function(){y({type:"RESET"})},[y,u]),i.useEffect(function(){if(!u)return;const L=de(u.getAnnotations()),C=L;return L.promise.then(V=>{y({type:"RESOLVE",value:V})}).catch(V=>{y({type:"REJECT",error:V})}),()=>{K(C)}},[y,u]),i.useEffect(()=>{if(S!==void 0){if(S===!1){P();return}A()}},[S]);function b(){c&&c()}function O(T){F(!1,`${T}`),l&&l(T)}const w=i.useMemo(()=>u.getViewport({scale:p,rotation:g}),[u,g,p]);return i.useEffect(function(){if(!f||!u||!s||!S)return;const{current:L}=E;if(!L)return;const C=w.clone({dontFlip:!0}),V={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:f.annotationStorage,commentManager:null,div:L,l10n:null,linkService:s,page:u,structTreeLayer:null,viewport:C},U={annotations:S,annotationStorage:f.annotationStorage,div:L,imageResourcesPath:r,linkService:s,page:u,renderForms:d,viewport:C};L.innerHTML="";try{new st(V).render(U),b()}catch(G){O(G)}return()=>{}},[S,r,s,u,f,d,w]),h.jsx("div",{className:he("react-pdf__Page__annotations","annotationLayer"),ref:E})}const ze={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Wt=/^H(\d+)$/;function zt(e){return e in ze}function Ee(e){return"children"in e}function qe(e){return Ee(e)?e.children.length===1&&0 in e.children&&"id"in e.children[0]:!1}function qt(e){const t={};if(Ee(e)){const{role:n}=e,r=n.match(Wt);if(r)t.role="heading",t["aria-level"]=Number(r[1]);else if(zt(n)){const s=ze[n];s&&(t.role=s)}}return t}function Ye(e){const t={};if(Ee(e)){if(e.alt!==void 0&&(t["aria-label"]=e.alt),e.lang!==void 0&&(t.lang=e.lang),qe(e)){const[n]=e.children;if(n){const r=Ye(n);return{...t,...r}}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function Yt(e){return e?{...qt(e),...Ye(e)}:null}function Je({className:e,node:t}){const n=i.useMemo(()=>Yt(t),[t]),r=i.useMemo(()=>!Ee(t)||qe(t)?null:t.children.map((s,a)=>h.jsx(Je,{node:s},a)),[t]);return h.jsx("span",{className:e,...n,children:r})}function Jt(){const e=ye();x(e);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[r,s]=re(),{value:a,error:o}=r,{customTextRenderer:l,page:c}=e;function u(){a&&n&&n(a)}function f(){o&&(F(!1,o.toString()),t&&t(o))}return i.useEffect(function(){s({type:"RESET"})},[s,c]),i.useEffect(function(){if(l||!c)return;const g=de(c.getStructTree()),p=g;return g.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>K(p)},[l,c,s]),i.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}u()}},[a]),a?h.jsx(Je,{className:"react-pdf__Page__structTree structTree",node:a}):null}const Me=it;function Kt(e){const t=ye();x(t);const n={...t,...e},{_className:r,canvasBackground:s,devicePixelRatio:a=Ft(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:f,rotate:d,scale:g}=n,{canvasRef:p}=e;x(c);const m=i.useRef(null);function y(){c&&l&&l(Pe(c,g))}function S(P){Gt(P)||(F(!1,P.toString()),o&&o(P))}const R=i.useMemo(()=>c.getViewport({scale:g*a,rotation:d}),[a,c,d,g]),E=i.useMemo(()=>c.getViewport({scale:g,rotation:d}),[c,d,g]);i.useEffect(function(){if(!c)return;c.cleanup();const{current:b}=m;if(!b)return;b.width=R.width,b.height=R.height,b.style.width=`${Math.floor(E.width)}px`,b.style.height=`${Math.floor(E.height)}px`,b.style.visibility="hidden";const O={annotationMode:u?Me.ENABLE_FORMS:Me.ENABLE,canvas:b,canvasContext:b.getContext("2d",{alpha:!1}),viewport:R};s&&(O.background=s);const w=c.render(O),T=w;return w.promise.then(()=>{b.style.visibility="",y()}).catch(S),()=>K(T)},[s,c,u,R,E]);const A=i.useCallback(()=>{const{current:P}=m;P&&(P.width=0,P.height=0)},[]);return i.useEffect(()=>A,[A]),h.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:Ue(p,m),style:{display:"block",userSelect:"none"},children:f?h.jsx(Jt,{}):null})}function Xt(e){return"str"in e}function Qt(){const e=ye();x(e);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:f}=e;x(o);const[d,g]=re(),{value:p,error:m}=d,y=i.useRef(null);F(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){p&&r&&r(p)}function R(){m&&(F(!1,m.toString()),n&&n(m))}i.useEffect(function(){g({type:"RESET"})},[o,g]),i.useEffect(function(){if(!o)return;const T=de(o.getTextContent()),L=T;return T.promise.then(C=>{g({type:"RESOLVE",value:C})}).catch(C=>{g({type:"REJECT",error:C})}),()=>K(L)},[o,g]),i.useEffect(()=>{if(p!==void 0){if(p===!1){R();return}S()}},[p]);const E=i.useCallback(()=>{a&&a()},[a]),A=i.useCallback(w=>{F(!1,w.toString()),s&&s(w)},[s]);function P(){const w=y.current;w&&w.classList.add("selecting")}function b(){const w=y.current;w&&w.classList.remove("selecting")}const O=i.useMemo(()=>o.getViewport({scale:f,rotation:u}),[o,u,f]);return i.useLayoutEffect(function(){if(!o||!p)return;const{current:T}=y;if(!T)return;T.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),C={container:T,textContentSource:L,viewport:O},V=new at(C),U=V;return V.render().then(()=>{const G=document.createElement("div");G.className="endOfContent",T.append(G);const j=T.querySelectorAll('[role="presentation"]');if(t){let $=0;p.items.forEach((N,I)=>{if(!Xt(N))return;const B=j[$];if(!B)return;const q=t({pageIndex:l,pageNumber:c,itemIndex:I,...N});B.innerHTML=q,$+=N.str&&N.hasEOL?2:1})}E()}).catch(A),()=>K(U)},[t,A,E,o,l,c,p,O]),h.jsx("div",{className:he("react-pdf__Page__textContent","textLayer"),onMouseUp:b,onMouseDown:P,ref:y})}const Ne=1;function Oe(e){const n={...He(),...e},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:f,devicePixelRatio:d,error:g="Failed to load the page.",height:p,inputRef:m,loading:y="Loading pageâ€¦",noData:S="No page specified.",onGetAnnotationsError:R,onGetAnnotationsSuccess:E,onGetStructTreeError:A,onGetStructTreeSuccess:P,onGetTextError:b,onGetTextSuccess:O,onLoadError:w,onLoadSuccess:T,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:C,onRenderError:V,onRenderSuccess:U,onRenderTextLayerError:G,onRenderTextLayerSuccess:j,pageIndex:$,pageNumber:N,pdf:I,registerPage:B,renderAnnotationLayer:q=!0,renderForms:oe=!1,renderMode:we="canvas",renderTextLayer:se=!0,rotate:ie,scale:Y=Ne,unregisterPage:ae,width:X,...ce}=n,[pe,H]=re(),{value:_,error:ue}=pe,le=i.useRef(null);x(I);const v=J(N)?N-1:$??null,D=N??(J($)?$+1:null),k=ie??(_?_.rotate:null),M=i.useMemo(()=>{if(!_)return null;let W=1;const Z=Y??Ne;if(X||p){const z=_.getViewport({scale:1,rotation:k});X?W=X/z.width:p&&(W=p/z.height)}return Z*W},[p,_,k,Y,X]);i.useEffect(function(){return()=>{J(v)&&s&&ae&&ae(v)}},[s,I,v,ae]);function Q(){if(T){if(!_||!M)return;T(Pe(_,M))}if(s&&B){if(!J(v)||!le.current)return;B(v,le.current)}}function fe(){ue&&(F(!1,ue.toString()),w&&w(ue))}i.useEffect(function(){H({type:"RESET"})},[H,I,v]),i.useEffect(function(){if(!I||!D)return;const Z=de(I.getPage(D)),z=Z;return Z.promise.then(Se=>{H({type:"RESOLVE",value:Se})}).catch(Se=>{H({type:"REJECT",error:Se})}),()=>K(z)},[H,I,D]),i.useEffect(()=>{if(_!==void 0){if(_===!1){fe();return}Q()}},[_,M]);const ve=i.useMemo(()=>J(v)&&D&&J(k)&&J(M)?{_className:r,canvasBackground:a,customTextRenderer:f,devicePixelRatio:d,onGetAnnotationsError:R,onGetAnnotationsSuccess:E,onGetStructTreeError:A,onGetStructTreeSuccess:P,onGetTextError:b,onGetTextSuccess:O,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:C,onRenderError:V,onRenderSuccess:U,onRenderTextLayerError:G,onRenderTextLayerSuccess:j,page:_,pageIndex:v,pageNumber:D,renderForms:oe,renderTextLayer:se,rotate:k,scale:M}:null,[r,a,f,d,R,E,A,P,b,O,L,C,V,U,G,j,_,v,D,oe,se,k,M]),Ke=i.useMemo(()=>Ve(ce,()=>_&&(M?Pe(_,M):void 0)),[ce,_,M]),ge=`${v}@${M}/${k}`;function Xe(){switch(we){case"custom":return x(u),h.jsx(u,{},`${ge}_custom`);case"none":return null;case"canvas":default:return h.jsx(Kt,{canvasRef:o},`${ge}_canvas`)}}function Qe(){return se?h.jsx(Qt,{},`${ge}_text`):null}function Ze(){return q?h.jsx(Ut,{},`${ge}_annotations`):null}function et(){function W(z){return!!z?.page}if(!W(ve))throw new Error("page is undefined");const Z=typeof l=="function"?l(ve):l;return h.jsxs(We.Provider,{value:ve,children:[Xe(),Qe(),Ze(),Z]})}function tt(){return D?I===null||_===void 0||_===null?h.jsx(ne,{type:"loading",children:typeof y=="function"?y():y}):I===!1||_===!1?h.jsx(ne,{type:"error",children:typeof g=="function"?g():g}):et():h.jsx(ne,{type:"no-data",children:typeof S=="function"?S():S})}return h.jsx("div",{className:he(r,c),"data-page-number":D,ref:Ue(m,le),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${M}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ke,children:tt()})}Vt();Ie.workerSrc="pdf.worker.mjs";function Zt(e){const t=e?.quant,n=e?.roomId,r=e?.limit,[s,a]=i.useState([]);return i.useEffect(()=>{let o,l=!0;async function c(){try{let u=ee.from("drawings").select("id,user_id,created_at,data").order("created_at",{ascending:!1}).limit(r);n&&(u=u.eq("room_id",n));const{data:f,error:d}=await u;if(d){console.error("Error fetching initial drawings:",d.message);return}if(!l)return;const g=(f||[]).map(p=>{const m=[];try{const S=p.data?.p||[];for(const R of S)m.push({x:R[0]/t,y:R[1]/t})}catch{}return{id:p.id,user_id:p.user_id??null,created_at:p.created_at,path:m}});a(g.reverse())}catch(u){console.error("Unexpected error fetching drawings:",u)}}return c(),o=ee.channel("realtime-drawings").on("postgres_changes",{event:"INSERT",schema:"public",table:"drawings"},u=>{try{const f=u.new,g=(f.data?.p||[]).map(p=>({x:p[0]/t,y:p[1]/t}));a(p=>[...p,{id:f.id,user_id:f.user_id??null,created_at:f.created_at,path:g}])}catch(f){console.error("Error parsing incoming drawing",f)}}).on("postgres_changes",{event:"DELETE",schema:"public",table:"drawings"},u=>{const f=u.old?.id;f&&a(d=>d.filter(g=>g.id!==f))}).subscribe(),()=>{l=!1,o&&ee.removeChannel(o)}},[t,n,r]),{drawings:s}}function Re(e,t){let n=2166136261;for(let r=0;r<e.length;r++)n=Math.imul(n^e.charCodeAt(r),16777619)>>>0;return n%t}function en(){const e=[];for(let t=1;t<=5;t++){const n=getComputedStyle(document.documentElement).getPropertyValue(`--chart-${t}`);n&&e.push(n.trim())}return e.length===0&&e.push("#1B2FDB"),e}function tn(){const{drawings:e}=Zt({quant:100,limit:50}),t=en(),n=i.useRef([]),r=i.useRef({}),[,s]=i.useState(0);i.useEffect(()=>{e.forEach(l=>{if(r.current[l.id])return;const c=Re(l.id+"side",3),u=["left","right","bottom"][c],f=Re(l.id+"off",100)/100,d=u==="bottom"?f*60+10:f*70+5,g=Re(l.id+"col",t.length),p=t[g],m={id:l.id,path:l.path,placement:{side:u,offset:d},color:p};n.current.push(m),r.current[l.id]=!0,s(y=>y+1)});const o=new Set(e.map(l=>l.id));for(let l=n.current.length-1;l>=0;l--){const c=n.current[l].id;o.has(c)||(n.current.splice(l,1),delete r.current[c],s(u=>u+1))}},[e,t]);const a=n.current;return h.jsx("div",{className:"pointer-events-none fixed inset-0 z-50",children:a.map(o=>{let c={position:"absolute",width:160,height:160};return o.placement.side==="left"?(c.left=12,c.top=`${o.placement.offset}%`):o.placement.side==="right"?(c.right=12,c.top=`${o.placement.offset}%`):(c.left=`${o.placement.offset}%`,c.bottom=12),h.jsx("div",{style:c,className:"opacity-95 fade-out transition-opacity",children:h.jsx("svg",{viewBox:"0 0 100 100",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid meet",children:h.jsx("g",{transform:"translate(6,6) scale(0.88)",children:h.jsx("path",{d:nn(o.path),fill:"none",stroke:o.color,strokeWidth:8,strokeLinecap:"round",strokeLinejoin:"round",opacity:.95})})})},o.id)})})}function nn(e){if(!e||e.length===0)return"";let t=1/0,n=1/0,r=-1/0,s=-1/0;for(const d of e)d.x<t&&(t=d.x),d.y<n&&(n=d.y),d.x>r&&(r=d.x),d.y>s&&(s=d.y);const a=r-t||1,o=s-n||1,l=88,c=6,u=6,f=[];return e.forEach((d,g)=>{const p=(d.x-t)/a*l+c,m=(d.y-n)/o*l+u;f.push(`${g===0?"M":"L"} ${p.toFixed(2)} ${m.toFixed(2)}`)}),f.join(" ")}function rn(){const e=Fe.c(13);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0];const[n,r]=i.useState(t),s=i.useRef(0);let a,o;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{const p=ee.channel("emoji_reactions").on("postgres_changes",{event:"INSERT",schema:"public",table:"emoji_reactions"},m=>{const y=m.new?.id,S=m.new?.emoji,R=Math.random()*70+10;r(E=>(s.current=s.current+1,[...E,{id:String(s.current),emoji:S,left:R}])),y&&(async()=>{try{await ee.from("emoji_reactions").delete().eq("id",y)}catch(E){console.error("Failed to delete emoji_reaction row",E)}})()}).subscribe();return()=>{ee.removeChannel(p)}},o=[],e[1]=a,e[2]=o):(a=e[1],o=e[2]),i.useEffect(a,o);let l;e[3]!==n.length?(l=()=>{if(n.length===0)return;const p=setTimeout(()=>{r(sn)},1200);return()=>clearTimeout(p)},e[3]=n.length,e[4]=l):l=e[4];let c;e[5]!==n?(c=[n],e[5]=n,e[6]=c):c=e[6],i.useEffect(l,c);let u;e[7]===Symbol.for("react.memo_cache_sentinel")?(u={position:"fixed",left:0,bottom:0,width:"100%",pointerEvents:"none",zIndex:50},e[7]=u):u=e[7];let f;e[8]!==n?(f=n.map(on),e[8]=n,e[9]=f):f=e[9];let d;e[10]===Symbol.for("react.memo_cache_sentinel")?(d=h.jsx("style",{children:`
        @keyframes floatUp {
          0% { transform: translateY(0) scale(1); opacity: 0.8; }
          60% { transform: translateY(-60px) scale(1.5); opacity: 1; }
          100% { transform: translateY(-120px) scale(2); opacity: 0; }
        }
      `}),e[10]=d):d=e[10];let g;return e[11]!==f?(g=h.jsxs("div",{style:u,children:[f,d]}),e[11]=f,e[12]=g):g=e[12],g}function on(e){return h.jsx("span",{style:{position:"absolute",left:`${e.left}%`,bottom:0,fontSize:"2rem",opacity:0,animation:"floatUp 1.2s cubic-bezier(.4,0,.2,1) forwards"},children:e.emoji},e.id)}function sn(e){return e.slice(1)}Ie.workerSrc=new URL("/me/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();function fn(){const e=Fe.c(22),{isDark:t}=ct(),[n,r]=i.useState(1),[s,a]=i.useState(window.innerHeight);let o,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{const b=w=>{const T=w.target,L=T?.tagName?.toLowerCase();L==="input"||L==="textarea"||T?.getAttribute("contenteditable")==="true"||(w.key==="ArrowRight"?(w.preventDefault(),r(cn)):w.key==="ArrowLeft"&&(w.preventDefault(),r(an)))};window.addEventListener("keydown",b,{passive:!1});const O=()=>a(window.innerHeight);return window.addEventListener("resize",O),()=>{window.removeEventListener("resize",O),window.removeEventListener("keydown",b)}},l=[],e[0]=o,e[1]=l):(o=e[0],l=e[1]),i.useEffect(o,l);let c,u;e[2]!==n?(c=()=>{console.log("newPage: ",n)},u=[n],e[2]=n,e[3]=c,e[4]=u):(c=e[3],u=e[4]),i.useEffect(c,u);let f,d;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=h.jsx(tn,{}),d=h.jsx(rn,{}),e[5]=f,e[6]=d):(f=e[5],d=e[6]);const g=t?"visible":"hidden",p=Math.floor(s*.95);let m;e[7]!==n||e[8]!==p?(m=h.jsx(Oe,{height:p,pageNumber:n,renderTextLayer:!1,renderAnnotationLayer:!1}),e[7]=n,e[8]=p,e[9]=m):m=e[9];let y;e[10]!==g||e[11]!==m?(y=h.jsx(ke,{className:g,file:"sample-dark.pdf",children:m}),e[10]=g,e[11]=m,e[12]=y):y=e[12];const S=t?"hidden":"visible",R=Math.floor(s*.95);let E;e[13]!==n||e[14]!==R?(E=h.jsx(Oe,{height:R,pageNumber:n,renderTextLayer:!1,renderAnnotationLayer:!1}),e[13]=n,e[14]=R,e[15]=E):E=e[15];let A;e[16]!==S||e[17]!==E?(A=h.jsx(ke,{className:S,file:"sample.pdf",children:E}),e[16]=S,e[17]=E,e[18]=A):A=e[18];let P;return e[19]!==A||e[20]!==y?(P=h.jsxs(ut.Fragment,{children:[f,d,h.jsxs("div",{className:"flex h-dynamic justify-center items-center",children:[y,A]})]}),e[19]=A,e[20]=y,e[21]=P):P=e[21],P}function an(e){return Math.max(1,e-1)}function cn(e){return e+1}export{fn as component};
